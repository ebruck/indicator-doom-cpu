PROJECT( indicator-doom-cpu C )
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )

SET( APP_VER_MAJOR 1 )
SET( APP_VER_MINOR 0 )
SET( APP_VER_PATCH 1 )
SET( APP_VERSION ${APP_VER_MAJOR}.${APP_VER_MINOR}.${APP_VER_PATCH} )

MESSAGE( "Building version: ${APP_VERSION}..." )

SET( CPACK_PACKAGE_VENDOR              "Edward G. Bruck")
SET( CPACK_PACKAGE_CONTACT             "ed.bruck1@gmail.com")
SET( CPACK_PACKAGE_DESCRIPTION         "Ubuntu CPU indicator that displays load using Flynn's dying face from the video game DOOM.")
SET( CPACK_PACKAGE_DESCRIPTION_SUMMARY "DOOM CPU Indicator for Ubuntu")
SET( CPACK_PACKAGE_NAME                "indicator-doom-cpu")
SET( CPACK_PACKAGE_VERSION             ${APP_VERSION})
SET( CPACK_PACKAGE_VERSION_MAJOR       ${APP_VER_MAJOR})
SET( CPACK_PACKAGE_VERSION_MINOR       ${APP_VER_MINOR})
SET( CPACK_PACKAGE_VERSION_PATCH       ${APP_VER_PATCH})
SET( CPACK_DEBIAN_PACKAGE_SECTION      "python")
SET( CPACK_SYSTEM_NAME                 "noarch" )
SET( CPACK_DEBIAN_PACKAGE_ARCHITECTURE "all" )
SET( CPACK_DEBIAN_PACKAGE_PRIORITY     "optional")
SET( CPACK_DEBIAN_PACKAGE_MAINTAINER   "Edward G. Bruck <ed.bruck1@gmail.com>")
SET( CPACK_DEBIAN_PACKAGE_DEPENDS      "python, python-gi, gir1.2-appindicator3-0.1")
SET( CPACK_GENERATOR                   "DEB")

INCLUDE( CPack )

INSTALL( PROGRAMS  ../indicator-doom-cpu                DESTINATION /usr/share/indicator-doom-cpu)
INSTALL( DIRECTORY ../icons                             DESTINATION /usr/share/indicator-doom-cpu)
INSTALL( FILES     ../debian/indicator-doom-cpu.desktop DESTINATION /usr/share/applications/)
INSTALL( FILES     ../debian/indicator-doom-cpu.desktop DESTINATION /etc/xdg/autostart/)
INSTALL( FILES     ../debian/copyright                  DESTINATION /usr/share/doc/indicator-doom-cpu)
INSTALL( FILES     ../debian/changelog                  DESTINATION /usr/share/doc/indicator-doom-cpu)
